!function(){function t(b){var w=jQuery,x="emoji-dialog",k=0,y=[],S=[],C="editormd-logo",E=[C,C+"-1x",C+"-2x",C+"-3x",C+"-4x",C+"-5x",C+"-6x",C+"-7x",C+"-8x"],M={"zh-cn":{toolbar:{emoji:"Emoji 表情"},dialog:{emoji:{title:"Emoji 表情"}}},"zh-tw":{toolbar:{emoji:"Emoji 表情"},dialog:{emoji:{title:"Emoji 表情"}}},en:{toolbar:{emoji:"Emoji"},dialog:{emoji:{title:"Emoji"}}}};b.fn.emojiDialog=function(){var i=this.cm,e=this.settings;if(e.emoji){var t=e.pluginPath+x+"/",o=this.editor,m=(i.getCursor(),i.getSelection(),this.classPrefix);w.extend(!0,this.lang,M[this.lang.name]),this.setToolbar();var a,l=this.lang,n=m+x,s=l.dialog.emoji,d=['<div class="'+m+'emoji-dialog-box" style="width: 760px;height: 334px;margin-bottom: 8px;overflow: hidden;">','<div class="'+m+'tab"></div>',"</div>"].join("\n");i.focus(),0<o.find("."+n).length?(a=o.find("."+n),S=[],a.find("a").removeClass("selected"),this.dialogShowMask(a),this.dialogLockScreen(),a.show()):a=this.createDialog({name:n,title:s.title,width:800,height:475,mask:e.dialogShowMask,drag:e.dialogDraggable,content:d,lockScreen:e.dialogLockScreen,maskStyle:{opacity:e.dialogMaskOpacity,backgroundColor:e.dialogMaskBgColor},buttons:{enter:[l.buttons.enter,function(){return i.replaceSelection(S.join(" ")),this.hide().lockScreen(!1).hideMask(),!1}],cancel:[l.buttons.cancel,function(){return this.hide().lockScreen(!1).hideMask(),!1}]}});var r=["Github emoji","Twemoji","Font awesome","Editor.md logo"],c=a.find("."+m+"tab");if(""===c.html()){for(var h='<ul class="'+m+'tab-head">',f=0;f<4;f++){h+="<li"+(0===f?' class="active"':"")+'><a href="javascript:;">'+r[f]+"</a></li>"}h+="</ul>",c.append(h);for(var g='<div class="'+m+'tab-container">',u=0;u<4;u++){g+='<div class="'+m+'tab-box" style="height: 260px;overflow: hidden;overflow-y: auto;'+(0===u?"":"display:none;")+'"></div>'}g+="</div>",c.append(g)}function j(){var i=p[k],e=y[i],t=v.eq(k);if(""===t.html()){function o(i,e){for(var t="editormd-logo"===e?"5":20,o=Math.ceil(i.length/t),a='<div class="'+m+'grid-table">',l=0;l<o;l++){for(var n='<div class="'+m+'grid-table-row">',s=0;s<t;s++){var d,r,c=w.trim(i[l*t+s]);void 0!==c&&""!==c?(0,"github-emoji"===e?(d="moon"===(d="black_large_square"===(d="+1"===c?"plus1":c)?"black_square":d)?"waxing_gibbous_moon":d,d=b.emoji.path+d+b.emoji.ext,n+='<a href="javascript:;" value=":'+c+':" title=":'+c+':" class="'+m+'emoji-btn">'+('<img src="'+d+'" width="24" class="emoji" title="&#58;'+c+'&#58;" alt="&#58;'+c+'&#58;" />')+"</a>"):"twemoji"===e?(r=b.twemoji.path+c+b.twemoji.ext,n+='<a href="javascript:;" value=":tw-'+c+':" title=":tw-'+c+':" class="'+m+'emoji-btn">'+('<img src="'+r+'" width="24" title="twemoji-'+c+'" alt="twemoji-'+c+'" class="emoji twemoji" />')+"</a>"):"font-awesome"===e?n+='<a href="javascript:;" value=":fa-'+c+':" title=":fa-'+c+':" class="'+m+'emoji-btn">'+('<i class="fa fa-'+c+' fa-emoji" title="'+c+'"></i>')+"</a>":"editormd-logo"===e&&(n+='<a href="javascript:;" value=":'+c+':" title=":'+c+':" style="width:20%;" class="'+m+'emoji-btn">'+('<i class="'+c+'" title="Editor.md logo ('+c+')"></i>')+"</a>")):n+='<a href="javascript:;" value=""></a>'}a+=n+="</div>"}return a+="</div>"}if(0===k)for(var a=0,l=e.length;a<l;a++){var n=0===a?' style="margin: 0 0 10px;"':' style="margin: 10px 0;"';t.append("<h4"+n+">"+e[a].category+"</h4>"),t.append(o(e[a].list,i))}else t.append(o(e,i));t.find("."+m+"emoji-btn").bind(b.mouseOrTouch("click","touchend"),function(){w(this).toggleClass("selected"),w(this).hasClass("selected")&&S.push(w(this).attr("value"))})}}var v=c.find("."+m+"tab-box"),p=["github-emoji","twemoji","font-awesome",C];y.length<1?("function"==typeof a.loading&&a.loading(!0),w.getJSON(t+"emoji.json?temp="+Math.random(),function(i){"function"==typeof a.loading&&a.loading(!1),(y=i)[C]=E,j()})):j(),c.find("li").bind(b.mouseOrTouch("click","touchend"),function(){var i=w(this);k=i.index(),i.addClass("active").siblings().removeClass("active"),v.eq(k).show().siblings().hide(),j()})}else alert("settings.emoji == false")}}"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=t:"function"==typeof define?define.amd?define(["editormd"],function(i){t(i)}):define(function(i){var e=i("./../../editormd");t(e)}):t(window.editormd)}();